import{r as k,o as i,f as u,h as s,e as B,U as g,Y as N,I as h,J as E,j as t,w as c,k as l,v as w,l as S,a7 as C,a8 as D,z as L,p as y,a9 as U,t as b,q as T,aa as H}from"./App.93664d39.js";import{u as j,p as A,v as J,g as O}from"./qiniu.6b7318e2.js";const q={},P={t:"1639127743337",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3985",width:"64",height:"64"},Y=s("path",{d:"M558.434375 667.221875a28.51875 28.51875 0 0 1 0 40.33125l-181.490625 181.490625a57.0375 57.0375 0 0 1-80.6625 0L134.95625 727.71875a57.0375 57.0375 0 0 1 0-80.6625l181.490625-181.490625a28.51875 28.51875 0 1 1 40.33125 40.33125l-181.490625 181.490625 161.325 161.325 181.490625-181.490625a28.51875 28.51875 0 0 1 40.33125 0z m60.496875-262.153125a28.51875 28.51875 0 0 1 0 40.33125l-201.65625 201.65625a28.51875 28.51875 0 0 1-40.33125-40.33125l201.65625-201.65625a28.51875 28.51875 0 0 1 40.33125 0z m241.9875-80.6625a57.0375 57.0375 0 0 1 0 80.6625l-181.490625 181.490625a28.51875 28.51875 0 1 1-40.33125-40.33125l181.490625-181.490625-161.325-161.325-181.490625 181.490625a28.51875 28.51875 0 1 1-40.33125-40.33125l181.490625-181.490625a57.0375 57.0375 0 0 1 80.6625 0l161.325 161.325z","p-id":"3986"},null,-1),G=[Y];function K(a,r){return i(),u("svg",P,G)}const Q=k(q,[["render",K]]),R={},W={t:"1632393445506",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4073",width:"64",height:"64"},X=s("path",{d:"M956.677 843.679c-2.693 50.048-68.034 38.343-102.164 38.343H127.867c-13.491 0-26.389 1.214-38.835-5.232-20.091-10.414-18.99-31.893-18.99-50.775v-645.53c0-49.515 67.21-38.395 99.287-38.395h663.46c30.873 0 68.7-5.97 98.949 2.345 38 10.45 24.934 90.773 24.934 118.533v226.166l0.005 354.545c0 33.013 51.2 33.013 51.2 0V270.095c0-37.524 7.49-86.953-6.605-122.88-22.446-57.21-77.399-56.325-127.8-56.325h-764.4c-50.883 0-87.578 40.453-90.22 89.544-0.533 9.907 0 19.994 0 29.911v613.837c0 18.16-0.236 35.277 6.605 52.715 13.972 35.62 48.814 56.33 86.323 56.33h794.757c54.467 0 98.243-32.025 101.345-89.543 1.772-33.014-49.438-32.84-51.205-0.005z","p-id":"4074"},null,-1),Z=s("path",{d:"M664.858 335.258c-1.485 45.875-36.163 80.547-82.033 82.032-45.86 1.485-80.625-38.39-82.033-82.032-1.484-45.865 38.39-80.625 82.033-82.033 45.86-1.485 80.625 38.39 82.033 82.033 1.065 32.931 52.27 33.034 51.2 0-2.402-74.215-59.024-130.837-133.233-133.233-74.173-2.401-130.95 62.633-133.233 133.233-2.401 74.173 62.633 130.949 133.233 133.232 74.173 2.402 130.95-62.633 133.233-133.232 1.07-33.035-50.135-32.927-51.2 0zM62.556 700.805L292.02 514.78h-36.203L701.26 904.714c24.73 21.653 61.092-14.413 36.198-36.198l-445.44-389.94c-11.346-9.932-24.796-9.246-36.203 0L26.353 664.607c-25.662 20.798 10.798 56.792 36.203 36.2z","p-id":"4075"},null,-1),e3=s("path",{d:"M600.924 751.114L765.62 565.975h-36.198c78.244 75.372 156.493 150.733 234.747 226.1 23.777 22.901 60.021-13.262 36.198-36.2-78.244-75.37-156.493-150.732-234.747-226.098-9.595-9.247-26.798-10.573-36.198 0a2831453.414 2831453.414 0 0 0-164.695 185.139c-21.868 24.576 14.213 60.918 36.198 36.198z","p-id":"4076"},null,-1),a3=[X,Z,e3];function s3(a,r){return i(),u("svg",W,a3)}const t3=k(R,[["render",s3]]),l3={class:"g-upload-image-content"},o3=["src"],n3={key:1,class:"g-upload-tip"},i3=s("div",null,"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u8FD9\u91CC\u66F4\u6362",-1),u3={key:0,class:"g-upload-image-cover"},c3=s("span",null,"\u66F4\u6539",-1),r3=s("p",{style:{padding:"0 10px"}},"|",-1),d3=["onClick"],p3={key:0,class:"g-input__caption"},_3=B({__name:"index",props:{modelValue:String,allowType:{type:String,default:"gif|jpeg|jpg|png"},size:{type:Number,default:2},action:{type:String,default:j},previewHost:{type:String,default:A},label:{type:String,default:""},inline:{type:[Boolean,String],default:!1}},emits:[g],setup(a,{emit:r}){const o=a,d=N(),p=h(!1),_=h({key:"",token:""}),v=h(!1),f=h(!1),z=async e=>{const n=J(e.file.file,{allowType:o.allowType,allowSize:o.size});if(n)return d.error(n),!1;try{return p.value=!0,_.value.token=await O(),_.value.key=`upload/${H()}_${e.file.name}`,!0}catch(I){p.value=!1,d.error(I.message)}return!1},$=e=>{p.value=!1;const n=JSON.parse(e.event.target.response);n.error?d.error(n.error):r(g,`${o.previewHost}/${n.key}`)},m=e=>{r(g,e)},x=()=>{const e=new Image;e.src=o.modelValue,e.onload=()=>{v.value=!1},e.onerror=()=>{v.value=!0,o.modelValue&&d.error("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25")}},M=()=>{o.modelValue&&(f.value=!0)},V=()=>{f.value=!1},F=()=>{m(""),f.value=!1};return E(()=>o.modelValue,x),(e,n)=>(i(),u("div",{class:T(["datav-gui g-upload",[{"--inline --single":!!a.inline}]])},[t(l(S),{value:a.modelValue,size:"small",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740","onUpdate:value":m},{prefix:c(()=>[t(l(w),null,{default:c(()=>[t(l(Q))]),_:1})]),_:1},8,["value"]),t(l(U),{accept:"image/*",action:a.action,multiple:!1,"show-file-list":!1,data:_.value,onBeforeUpload:z,onFinish:$},{default:c(()=>[t(l(C),null,{default:c(()=>[t(l(D),{show:p.value},{default:c(()=>[s("div",{class:"g-upload-image-wrap",onMouseenter:M,onMouseleave:V},[s("div",l3,[a.modelValue&&!v.value?(i(),u("img",{key:0,src:a.modelValue},null,8,o3)):(i(),u("div",n3,[t(l(w),{size:"60"},{default:c(()=>[t(l(t3))]),_:1}),i3]))]),f.value?(i(),u("div",u3,[c3,r3,s("span",{onClick:L(F,["stop"])},"\u5220\u9664",8,d3)])):y("",!0)],32)]),_:1},8,["show"])]),_:1})]),_:1},8,["action","data"]),a.label?(i(),u("span",p3,b(a.label),1)):y("",!0)],2))}});export{_3 as default};
