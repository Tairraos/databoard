import{aO as I,aP as l,_ as e,aQ as T,aR as O,aS as D,aT as w,e as x,aM as P,aU as g,a6 as R,aV as A,aW as L,aX as S,aY as y,s as $,a0 as M,aZ as C,f as B,m as j,x as h,j as c,w as F,P as k,r as _,o as q}from"./App.488876ce.js";import{g as N}from"./templates.87d14512.js";const W=n=>n.replace("-2-d","2d").replace("-3-d","3d");async function U(n){const t=W(I(n.substring(1)));switch(n.substring(1)){case"BasicBar":{const o=await l(Object.assign({"./bar/basic-bar/src/basic-bar.ts":()=>e(()=>import("./basic-bar.2bc5bcda.js"),["assets/basic-bar.2bc5bcda.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./bar/${t}/src/${t}.ts`);return new o.default}case"BasicLine":{const o=await l(Object.assign({"./line/basic-line/src/basic-line.ts":()=>e(()=>import("./basic-line.eca8a208.js"),["assets/basic-line.eca8a208.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./line/${t}/src/${t}.ts`);return new o.default}case"China2d":{const o=await l(Object.assign({"./map/china2d/src/china2d.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bW),["assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./map/${t}/src/${t}.ts`);return new o.default}case"China2dArea":case"China2dBubbles":case"China2dFlyingline":{const o=await l(Object.assign({"./map/china2d/src/china2d-area/index.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bV),["assets/App.488876ce.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-bubbles/index.ts":()=>e(()=>import("./index.2b156b7b.js"),["assets/index.2b156b7b.js","assets/App.488876ce.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-flyingline/index.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bX),["assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./map/china2d/src/${t}/index.ts`);return new o.default}case"WordCloud":{const o=await l(Object.assign({"./chart/word-cloud/src/word-cloud.ts":()=>e(()=>import("./word-cloud.6c17ddfc.js"),["assets/word-cloud.6c17ddfc.js","assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./chart/${t}/src/${t}.ts`);return new o.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const o=await l(Object.assign({"./text/main-title/src/main-title.ts":()=>e(()=>import("./main-title.8d0843ae.js"),["assets/main-title.8d0843ae.js","assets/App.488876ce.js","assets/App.83a8713a.css"]),"./text/marquee/src/marquee.ts":()=>e(()=>import("./marquee.fc184823.js"),["assets/marquee.fc184823.js","assets/App.488876ce.js","assets/App.83a8713a.css"]),"./text/number-title-flop/src/number-title-flop.ts":()=>e(()=>import("./number-title-flop.129df94e.js"),["assets/number-title-flop.129df94e.js","assets/App.488876ce.js","assets/App.83a8713a.css"]),"./text/paragraph/src/paragraph.ts":()=>e(()=>import("./paragraph.c2624303.js"),["assets/paragraph.c2624303.js","assets/App.488876ce.js","assets/App.83a8713a.css"]),"./text/timer/src/timer.ts":()=>e(()=>import("./timer.27fd45b8.js"),["assets/timer.27fd45b8.js","assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./text/${t}/src/${t}.ts`);return new o.default}case"FullScreen":{const o=await l(Object.assign({"./button/full-screen/src/full-screen.ts":()=>e(()=>import("./full-screen.e14d1263.js"),["assets/full-screen.e14d1263.js","assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./button/${t}/src/${t}.ts`);return new o.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const o=await l(Object.assign({"./media/bg-box/src/bg-box.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bT),["assets/App.488876ce.js","assets/App.83a8713a.css"]),"./media/border-box/src/border-box.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bS),["assets/App.488876ce.js","assets/App.83a8713a.css"]),"./media/decoration/src/decoration.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bU),["assets/App.488876ce.js","assets/App.83a8713a.css"]),"./media/main-img/src/main-img.ts":()=>e(()=>import("./main-img.fbec2772.js"),["assets/main-img.fbec2772.js","assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./media/${t}/src/${t}.ts`);return new o.default}case"DatePicker":{const o=await l(Object.assign({"./other/date-picker/src/date-picker.ts":()=>e(()=>import("./App.488876ce.js").then(a=>a.bY),["assets/App.488876ce.js","assets/App.83a8713a.css"])}),`./other/${t}/src/${t}.ts`);return new o.default}default:throw Error(`Unknown component type: ${n}.`)}}const H=async()=>{const n=T(),t=O(),o=D(),a=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"],b=await Promise.all(a.map(r=>U(r)));b.map(r=>{r.attr.x=w(t.pageConfig.width-r.attr.w),r.attr.y=w(t.pageConfig.height-r.attr.h)}),await n.addComs(b);const s=[],u=[];b.forEach(r=>{r.apis.source&&(u.push(r.id),s.push(r.loadData()))}),s.length>0&&(await Promise.all(s),setTimeout(()=>{u.forEach(r=>{var m;(m=o.events[r])==null||m.requestData()})},200))},X=x({name:"ScreenEditor",components:{HeaderToolbar:P(()=>e(()=>import("./index.acab36ff.js"),["assets/index.acab36ff.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/screen.4bac5754.js","assets/layer.41bd8eed.js","assets/publish-screen.02827b19.js","assets/publish-screen.075bc684.css","assets/release.93cb7bd2.js","assets/help.17c892b4.js","assets/index.c2f9b6bc.css"])),FooterToolbar:P(()=>e(()=>import("./index.aa327120.js"),["assets/index.aa327120.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/arrow-down.0d6b7e33.js","assets/index.a3b0f861.css"])),EditorContextMenu:P(()=>e(()=>import("./index.ec258b2c.js"),["assets/index.ec258b2c.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/dom.3a106cf3.js","assets/edit.725315c0.js","assets/delete.561cf48c.js","assets/copy.9ead3642.js","assets/group.8be386df.js","assets/lock.2d202b45.js","assets/show.840b3f2e.js","assets/hide.114c085d.js","assets/index.717cfe10.js","assets/warning.da0cf4e8.js","assets/index.71b4c1c6.css"])),CanvasMain:g(()=>e(()=>import("./index.513b7d6f.js"),["assets/index.513b7d6f.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/dom.3a106cf3.js","assets/index.717cfe10.js","assets/warning.da0cf4e8.js","assets/templates.87d14512.js","assets/index.42e7b401.css"])),LayerPanel:g(()=>e(()=>import("./index.c0c17cc6.js"),["assets/index.c0c17cc6.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/delete.561cf48c.js","assets/back.45107c1b.js","assets/group.8be386df.js","assets/lock.2d202b45.js","assets/hide.114c085d.js","assets/view-grid.88ad7723.js","assets/index.717cfe10.js","assets/dom.3a106cf3.js","assets/warning.da0cf4e8.js","assets/arrow-right.245fa02e.js","assets/index.7a92d1a0.css"])),ComponentsPanel:g(()=>e(()=>import("./index.40e0be15.js"),["assets/index.40e0be15.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/search.b2473e7d.js","assets/back.45107c1b.js","assets/lock.2d202b45.js","assets/templates.87d14512.js","assets/index.9da0e4e0.css"])),ConfigPanel:g(()=>e(()=>import("./index.9d36daf4.js"),["assets/index.9d36daf4.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/interact.86ec2a2a.js","assets/config.3c16c364.js","assets/index.b6e165b4.css"])),ToolboxPanel:g(()=>e(()=>import("./index.657a1b90.js"),["assets/index.657a1b90.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/index.add1ca62.css"])),FilterManagerDrawer:g(()=>e(()=>import("./filter-manager-drawer.07e118a6.js"),["assets/filter-manager-drawer.07e118a6.js","assets/App.488876ce.js","assets/App.83a8713a.css","assets/warning.da0cf4e8.js","assets/document.422f4791.js","assets/filter-collapse-item.ad8c33d7.js","assets/arrow-left.8799fcdd.js","assets/edit.725315c0.js","assets/delete.561cf48c.js","assets/release.93cb7bd2.js","assets/drag.c621632f.js","assets/config.3c16c364.js","assets/filter-manager-drawer.6310fa74.css"]))},props:{projectId:{type:[String,Number],required:!0}},setup(n){const t=R(),o=A(),a=L(),b=S(),s=O(),u=T(),r=y(),m=$(!0);return b.enable(),s.setEditMode(),M(async()=>{var E;try{const p=parseInt(t.query.tpl);if(p>0){const{data:d}=await N(p);if(d){const{config:i}=d;s.setEditorOption({screen:{id:+n.projectId,name:d.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),u.load(i.coms);const{componentsView:f,publishersView:v,subscribersView:V}=i.variables;r.$patch({componentsView:f,publishersView:v,subscribersView:V}),a.$patch({dataFilters:(E=i.dataFilters)!=null?E:[]})}p===1&&H()}else{const d=+n.projectId;await Promise.all([s.loadScreen(d),a.request(d),u.request(d)])}}catch(p){C("editor",p.message)}finally{m.value=!1,document.title=`${s.screen.name} | \u7F16\u8F91\u5668`,s.autoCanvasScale(()=>o.getPanelOffset)}}),{loading:m}}});const Y={class:"g-layout is-vertical edit-container"},z={class:"g-header"},Q={id:"edit-main-wp",class:"g-layout edit-main-wp"},Z={class:"g-layout edit-main"};function G(n,t,o,a,b,s){const u=_("header-toolbar"),r=_("layer-panel"),m=_("components-panel"),E=_("filter-manager-drawer"),p=_("toolbox-panel"),d=_("canvas-main"),i=_("g-loading"),f=_("footer-toolbar"),v=_("config-panel"),V=_("editor-context-menu");return q(),j(k,null,[h("div",Y,[h("div",z,[c(u)]),h("div",Q,[c(r),c(m),c(E),h("div",Z,[c(p),c(i,{spinning:n.loading},{default:F(()=>[c(d)]),_:1},8,["spinning"]),c(f)]),c(v)])]),c(V)],64)}const J=B(X,[["render",G],["__scopeId","data-v-508c5002"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{U as c,te as i};
