import{v as I,w as G,I as i,a0 as p}from"./App.404b9962.js";import{o as S,b as P}from"./dom.8a9bb796.js";import{I as A}from"./warning.078b14f6.js";import{bx as T,bb as $,bl as j,al as r,bf as B}from"./vendor.891943b7.js";const m=T({x:0,y:0}),Y=()=>{const C=$(),f=j(),o=I(),a=G(),d=r(()=>o.selectedComs.every(e=>e.locked)),l=r(()=>o.selectedComs.every(e=>e.hided)),h=r(()=>o.selectedComs.every(e=>e.type===i.layer)),g=r(()=>{var c;const e=o.selectedComs,t=(c=e[0])==null?void 0:c.parentId;return t?e.some(s=>s.type===i.layer)?!0:!o.coms.find(s=>s.id===t):e.some(s=>{var n;return(n=s.children)==null?void 0:n.some(w=>w.type===i.layer)})}),y=e=>{const t=o.selectedComs;if(t.length===0)return;const c=t[0].parentId,s=t.map(n=>n.id);(e===p.top||e===p.down)&&s.reverse(),s.forEach(n=>{o.move(e,n,c)})},E=()=>{const e=o.selectedComs;if(e.length===0)return;const t=!d.value;e.forEach(c=>{c.locked=t})},v=()=>{const e=o.selectedComs;if(e.length===0)return;const t=!l.value;e.forEach(c=>{c.hided=t})},F=()=>{const e=o.selectedComs;if(e.length===0)return;const t=e.map(s=>s.alias),c=f.create({content:`\u5220\u9664\u540E\u53EF\u80FD\u65E0\u6CD5\u6062\u590D\uFF0C\u662F\u5426\u5220\u9664${t.join("\uFF0C")}\uFF0C\u5171${t.length}\u4E2A\u7EC4\u4EF6`,negativeText:"\u53D6\u6D88",positiveText:"\u786E\u5B9A",iconPlacement:"top",icon:()=>B(A),onPositiveClick:async()=>{c.loading=!0;try{await o.deletes(e)}catch(s){C.error(s.message)}}})},x=()=>{o.selectedComs[0].renameing=!0},D=()=>{o.selectedComs.forEach(e=>{o.copy(e.id)})},k=()=>{o.selectedComs.length!==0&&o.createGroup()},M=()=>{o.selectedComs.length!==0&&o.cancelGroup()},b=(e,t)=>{e.preventDefault(),e.stopPropagation(),t.selected&&(m.x=e.clientX,m.y=e.clientY,a.contextMenu.show=!0,S(document,"click",u))},u=()=>{P(document,"click",u),a.contextMenu.show=!1};return{pos:m,isLocked:d,isHided:l,isGroup:h,disableGroup:g,showMenu:b,hideMenu:u,moveCom:y,lockCom:E,hideCom:v,confirmDeleteCom:F,renameCom:x,copyCom:D,composeComs:k,decomposeComs:M}};export{Y as u};
