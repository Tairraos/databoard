import{f as H,o,m as n,x as p,e as Q,T as h,U as j,s as F,v as c,E as J,O as K,r as a,h as u,w as l,j as i,y as w,n as b,t as _,p as g,l as N,P as D,B as W,Q as q,k as M}from"./App.5d51c89e.js";import{I as X}from"./arrow-right.e64e6b97.js";import{I as Y}from"./plus.c251cc4b.js";import{I as Z}from"./delete.f743b2e5.js";import{I as x}from"./copy.430528f9.js";const ee={},te={t:"1641143491910",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4028",width:"64",height:"64"},oe=p("path",{d:"M896 128H128c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h768c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667z m-42.666667 682.666667H170.666667V213.333333h682.666666v597.333334z","p-id":"4029"},null,-1),le=p("path",{d:"M170.666667 469.333333h682.666666v85.333334H170.666667v-85.333334z","p-id":"4030"},null,-1),ae=[oe,le];function se(e,s){return o(),n("svg",te,ae)}const ne=H(ee,[["render",se]]),ie={},de={t:"1641143458555",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4027",width:"64",height:"64"},ce=p("path",{d:"M853.333333 128H170.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h682.666666c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667zM213.333333 810.666667V213.333333h256v597.333334H213.333333z m597.333334 0h-256V213.333333h256v597.333334z","p-id":"4028"},null,-1),ue=[ce];function re(e,s){return o(),n("svg",de,ue)}const me=H(ie,[["render",re]]),be=Q({name:"GFieldCollapse",components:{IconArrowRight:X,IconPlus:Y,IconDelete:Z,IconCopy:x,IconLayoutRow:ne,IconLayoutColumn:me},props:{mode:{type:String,default:""},label:{type:String,required:!0},tooltip:{type:String},toggle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},defaultLayout:{type:String,default:h.horizontal},features:{type:Array,default:()=>[]},list:Array,min:{type:Number,default:0},max:{type:Number,default:1e3},tab:{type:[String,Function]},addItem:{type:Function,default:()=>{}}},emits:[j],setup(e,s){const k=F([]),y=F(0),U=F(e.defaultLayout===h.horizontal),P=c(()=>k.value.length>0&&e.features.length>0),T=c(()=>e.features.includes(h.horizontal)),r=c(()=>e.features.includes(h.vertical)),C=c(()=>e.features.includes(h.copy)),f=c(()=>e.features.includes(h.add)),I=c(()=>e.features.includes(h.remove)),V=c(()=>(T.value||r.value)&&(C.value||f.value||I.value)),S=c(()=>{const t=!e.list||e.list.length<e.min||e.list.length>=e.max;return{disabled:t,msg:t?"\u4E0D\u53EF\u590D\u5236":""}}),L=c(()=>{const t=!e.list||e.list.length>=e.max;return{disabled:t,msg:t?"\u5DF2\u81F3\u6700\u5927\u9879\u6570":""}}),$=c(()=>{const t=!e.list||e.list.length<=e.min;return{disabled:t,msg:t?"\u5DF2\u81F3\u6700\u5C0F\u9879\u6570":""}}),R=t=>{e.toggle&&!e.modelValue||(k.value=t)},z=t=>{s.emit(j,t)},A=()=>{if(!S.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.push(K(e.list[t]))}},E=()=>{if(!$.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.splice(t,1),y.value=0}},m=()=>{if(!L.value.disabled&&typeof e.addItem=="function"){const t=e.addItem()||{};e.list.push(t)}},d=t=>{const{tab:v,label:G}=e;return typeof v=="function"?v(e.list[t]):(v||G)+(t+1)},O=t=>{y.value=t};return J(()=>e.modelValue,t=>{t||(k.value=[])}),{activeNames:k,activeTab:y,isLayoutRow:U,visibleToolbox:P,showToolboxRow:T,showToolboxCol:r,showToolboxCopy:C,showToolboxAdd:f,showToolboxDel:I,showToolboxSplit:V,copyState:S,addState:L,deleteState:$,handleExpand:R,toggleVisible:z,copyData:A,addData:m,deleteData:E,getTabLabel:d,changeTab:O}}}),fe={class:"g-field-show-placeholder"},he=["title"],ge=["innerHTML"],pe=["title"],ye={key:2,class:"g-field-collapse-panel-toolbox"},ve={key:2,class:"g-field-collapse-panel-toolbox-split"},we={key:1,class:"g-field-tabs --column"},_e=["onClick"],ke={key:1,class:"g-field-collapse-panel-empty"};function Te(e,s,k,y,U,P){const T=a("IconArrowRight"),r=a("n-icon"),C=a("n-switch"),f=a("n-tooltip"),I=a("IconLayoutRow"),V=a("IconLayoutColumn"),S=a("IconCopy"),L=a("IconPlus"),$=a("IconDelete"),R=a("n-tab-pane"),z=a("n-tabs"),A=a("n-collapse-item"),E=a("n-collapse");return o(),u(E,{"expanded-names":e.activeNames,"arrow-placement":"right","display-directive":"show",class:g(["g-field-collapse",{"--disabled":e.toggle&&!e.modelValue}]),"onUpdate:expandedNames":e.handleExpand},{arrow:l(()=>[i(r,null,{default:l(()=>[i(T)]),_:1})]),default:l(()=>[i(A,{class:"g-field-collapse-panel"},{header:l(()=>[p("i",fe,[e.toggle?(o(),u(C,{key:0,value:e.modelValue,size:"small",onClick:s[0]||(s[0]=w(()=>{},["stop"])),"onUpdate:value":e.toggleVisible},null,8,["value","onUpdate:value"])):b("",!0)]),e.tooltip?(o(),u(f,{key:0,placement:"top"},{trigger:l(()=>[p("label",{class:"g-field-title-with-description",title:e.label},_(e.label),9,he)]),default:l(()=>[p("span",{innerHTML:e.tooltip},null,8,ge)]),_:1})):(o(),n("label",{key:1,class:"g-field-title",title:e.label},_(e.label),9,pe)),e.visibleToolbox?(o(),n("div",ye,[e.showToolboxRow?(o(),u(r,{key:0,class:g(["toolbox-icon",{"--selected":e.isLayoutRow}]),onClick:s[1]||(s[1]=w(m=>e.isLayoutRow=!0,["stop"]))},{default:l(()=>[i(I)]),_:1},8,["class"])):b("",!0),e.showToolboxCol?(o(),u(r,{key:1,class:g(["toolbox-icon",{"--selected":!e.isLayoutRow}]),onClick:s[2]||(s[2]=w(m=>e.isLayoutRow=!1,["stop"]))},{default:l(()=>[i(V)]),_:1},8,["class"])):b("",!0),e.showToolboxSplit?(o(),n("span",ve)):b("",!0),e.showToolboxCopy?(o(),u(f,{key:3,placement:"top",disabled:!e.copyState.disabled},{trigger:l(()=>[i(r,{class:g(["toolbox-icon",{"--disabled":e.copyState.disabled}]),onClick:w(e.copyData,["stop"])},{default:l(()=>[i(S)]),_:1},8,["class","onClick"])]),default:l(()=>[N(" "+_(e.copyState.msg),1)]),_:1},8,["disabled"])):b("",!0),e.showToolboxAdd?(o(),u(f,{key:4,placement:"top",disabled:!e.addState.disabled},{trigger:l(()=>[i(r,{class:g(["toolbox-icon --icon-add",{"--disabled":e.addState.disabled}]),onClick:w(e.addData,["stop"])},{default:l(()=>[i(L)]),_:1},8,["class","onClick"])]),default:l(()=>[N(" "+_(e.addState.msg),1)]),_:1},8,["disabled"])):b("",!0),e.showToolboxDel?(o(),u(f,{key:5,placement:"top",disabled:!e.deleteState.disabled},{trigger:l(()=>[i(r,{class:g(["toolbox-icon",{"--disabled":e.deleteState.disabled}]),onClick:w(e.deleteData,["stop"])},{default:l(()=>[i($)]),_:1},8,["class","onClick"])]),default:l(()=>[N(" "+_(e.deleteState.msg),1)]),_:1},8,["disabled"])):b("",!0)])):b("",!0)]),default:l(()=>[e.mode==="layout"?(o(),n(D,{key:0},[e.list&&e.list.length>0?(o(),n(D,{key:0},[e.isLayoutRow?(o(),u(z,{key:0,value:e.activeTab,"onUpdate:value":s[3]||(s[3]=m=>e.activeTab=m),type:"card",class:"g-field-tabs",style:W({"--datav-gui-tabs-card-num":e.max})},{default:l(()=>[(o(!0),n(D,null,q(e.list,(m,d)=>(o(),u(R,{key:d,name:d,tab:e.getTabLabel(d)},{default:l(()=>[M(e.$slots,"default",{item:m})]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value","style"])):(o(),n("div",we,[(o(!0),n(D,null,q(e.list,(m,d)=>(o(),n("div",{key:d,class:"g-field-tabs-column-item"},[p("span",{class:g(["g-field-tabs-column-item-head",{"--selected":d===e.activeTab}]),onClick:O=>e.changeTab(d)},_(e.getTabLabel(d)),11,_e),M(e.$slots,"default",{item:m})]))),128))]))],64)):(o(),n("span",ke," \u5217\u8868\u4E3A\u7A7A "))],64)):M(e.$slots,"default",{key:1})]),_:3})]),_:3},8,["expanded-names","class","onUpdate:expandedNames"])}const B=H(be,[["render",Te]]);B.install=e=>{e.component(B.name,B)};export{B as default};
