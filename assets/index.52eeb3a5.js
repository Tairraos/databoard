import{aO as I,aP as l,_ as e,aQ as T,aR as O,aS as D,aT as w,e as x,aM as P,aU as g,a6 as R,aV as A,aW as L,aX as S,aY as y,s as $,a0 as M,aZ as C,f as B,m as j,x as h,j as c,w as F,P as k,r as _,o as q}from"./App.5d51c89e.js";import{g as N}from"./templates.2d00e6e8.js";const W=n=>n.replace("-2-d","2d").replace("-3-d","3d");async function U(n){const t=W(I(n.substring(1)));switch(n.substring(1)){case"BasicBar":{const o=await l(Object.assign({"./bar/basic-bar/src/basic-bar.ts":()=>e(()=>import("./basic-bar.b3d4536d.js"),["assets/basic-bar.b3d4536d.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./bar/${t}/src/${t}.ts`);return new o.default}case"BasicLine":{const o=await l(Object.assign({"./line/basic-line/src/basic-line.ts":()=>e(()=>import("./basic-line.86711fff.js"),["assets/basic-line.86711fff.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./line/${t}/src/${t}.ts`);return new o.default}case"China2d":{const o=await l(Object.assign({"./map/china2d/src/china2d.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bW),["assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./map/${t}/src/${t}.ts`);return new o.default}case"China2dArea":case"China2dBubbles":case"China2dFlyingline":{const o=await l(Object.assign({"./map/china2d/src/china2d-area/index.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bV),["assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-bubbles/index.ts":()=>e(()=>import("./index.6e3810a6.js"),["assets/index.6e3810a6.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-flyingline/index.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bX),["assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./map/china2d/src/${t}/index.ts`);return new o.default}case"WordCloud":{const o=await l(Object.assign({"./chart/word-cloud/src/word-cloud.ts":()=>e(()=>import("./word-cloud.200c552a.js"),["assets/word-cloud.200c552a.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./chart/${t}/src/${t}.ts`);return new o.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const o=await l(Object.assign({"./text/main-title/src/main-title.ts":()=>e(()=>import("./main-title.8ffe94ef.js"),["assets/main-title.8ffe94ef.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./text/marquee/src/marquee.ts":()=>e(()=>import("./marquee.08442c29.js"),["assets/marquee.08442c29.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./text/number-title-flop/src/number-title-flop.ts":()=>e(()=>import("./number-title-flop.12d1cd7a.js"),["assets/number-title-flop.12d1cd7a.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./text/paragraph/src/paragraph.ts":()=>e(()=>import("./paragraph.0eb4009f.js"),["assets/paragraph.0eb4009f.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./text/timer/src/timer.ts":()=>e(()=>import("./timer.7df93eae.js"),["assets/timer.7df93eae.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./text/${t}/src/${t}.ts`);return new o.default}case"FullScreen":{const o=await l(Object.assign({"./button/full-screen/src/full-screen.ts":()=>e(()=>import("./full-screen.7c4f5e20.js"),["assets/full-screen.7c4f5e20.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./button/${t}/src/${t}.ts`);return new o.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const o=await l(Object.assign({"./media/bg-box/src/bg-box.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bT),["assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./media/border-box/src/border-box.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bS),["assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./media/decoration/src/decoration.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bU),["assets/App.5d51c89e.js","assets/App.83a8713a.css"]),"./media/main-img/src/main-img.ts":()=>e(()=>import("./main-img.e6301e35.js"),["assets/main-img.e6301e35.js","assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./media/${t}/src/${t}.ts`);return new o.default}case"DatePicker":{const o=await l(Object.assign({"./other/date-picker/src/date-picker.ts":()=>e(()=>import("./App.5d51c89e.js").then(a=>a.bY),["assets/App.5d51c89e.js","assets/App.83a8713a.css"])}),`./other/${t}/src/${t}.ts`);return new o.default}default:throw Error(`Unknown component type: ${n}.`)}}const H=async()=>{const n=T(),t=O(),o=D(),a=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"],b=await Promise.all(a.map(r=>U(r)));b.map(r=>{r.attr.x=w(t.pageConfig.width-r.attr.w),r.attr.y=w(t.pageConfig.height-r.attr.h)}),await n.addComs(b);const s=[],u=[];b.forEach(r=>{r.apis.source&&(u.push(r.id),s.push(r.loadData()))}),s.length>0&&(await Promise.all(s),setTimeout(()=>{u.forEach(r=>{var m;(m=o.events[r])==null||m.requestData()})},200))},X=x({name:"ScreenEditor",components:{HeaderToolbar:P(()=>e(()=>import("./index.f4da6353.js"),["assets/index.f4da6353.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/screen.ce294341.js","assets/layer.ff1c0193.js","assets/publish-screen.ea0dd6c0.js","assets/publish-screen.075bc684.css","assets/release.c93c709a.js","assets/help.aedb4b26.js","assets/index.c2f9b6bc.css"])),FooterToolbar:P(()=>e(()=>import("./index.8bcaea03.js"),["assets/index.8bcaea03.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/arrow-down.13841ead.js","assets/index.a3b0f861.css"])),EditorContextMenu:P(()=>e(()=>import("./index.fbac7a66.js"),["assets/index.fbac7a66.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/dom.d6ebfc79.js","assets/edit.7952f962.js","assets/delete.f743b2e5.js","assets/copy.430528f9.js","assets/group.63ef8525.js","assets/lock.0e24422f.js","assets/show.a5d6dc61.js","assets/hide.7b9e6c06.js","assets/index.eae0d2dd.js","assets/warning.f03e32ec.js","assets/index.71b4c1c6.css"])),CanvasMain:g(()=>e(()=>import("./index.1d3419d6.js"),["assets/index.1d3419d6.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/dom.d6ebfc79.js","assets/index.eae0d2dd.js","assets/warning.f03e32ec.js","assets/templates.2d00e6e8.js","assets/index.42e7b401.css"])),LayerPanel:g(()=>e(()=>import("./index.0fb3fb38.js"),["assets/index.0fb3fb38.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/delete.f743b2e5.js","assets/back.def058e9.js","assets/group.63ef8525.js","assets/lock.0e24422f.js","assets/hide.7b9e6c06.js","assets/view-grid.c08ca63c.js","assets/index.eae0d2dd.js","assets/dom.d6ebfc79.js","assets/warning.f03e32ec.js","assets/arrow-right.e64e6b97.js","assets/index.16c1012b.css"])),ComponentsPanel:g(()=>e(()=>import("./index.fd11127b.js"),["assets/index.fd11127b.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/search.39cb9bae.js","assets/back.def058e9.js","assets/lock.0e24422f.js","assets/templates.2d00e6e8.js","assets/index.9da0e4e0.css"])),ConfigPanel:g(()=>e(()=>import("./index.04730d2e.js"),["assets/index.04730d2e.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/interact.d63035a4.js","assets/config.3c16c364.js","assets/index.b6e165b4.css"])),ToolboxPanel:g(()=>e(()=>import("./index.d80be468.js"),["assets/index.d80be468.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/index.add1ca62.css"])),FilterManagerDrawer:g(()=>e(()=>import("./filter-manager-drawer.8d11a980.js"),["assets/filter-manager-drawer.8d11a980.js","assets/App.5d51c89e.js","assets/App.83a8713a.css","assets/warning.f03e32ec.js","assets/document.4a605cf7.js","assets/filter-collapse-item.1b81ffd9.js","assets/arrow-left.2cbc4d76.js","assets/edit.7952f962.js","assets/delete.f743b2e5.js","assets/release.c93c709a.js","assets/drag.9e668770.js","assets/config.3c16c364.js","assets/filter-manager-drawer.6310fa74.css"]))},props:{projectId:{type:[String,Number],required:!0}},setup(n){const t=R(),o=A(),a=L(),b=S(),s=O(),u=T(),r=y(),m=$(!0);return b.enable(),s.setEditMode(),M(async()=>{var E;try{const p=parseInt(t.query.tpl);if(p>0){const{data:d}=await N(p);if(d){const{config:i}=d;s.setEditorOption({screen:{id:+n.projectId,name:d.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),u.load(i.coms);const{componentsView:f,publishersView:v,subscribersView:V}=i.variables;r.$patch({componentsView:f,publishersView:v,subscribersView:V}),a.$patch({dataFilters:(E=i.dataFilters)!=null?E:[]})}p===1&&H()}else{const d=+n.projectId;await Promise.all([s.loadScreen(d),a.request(d),u.request(d)])}}catch(p){C("editor",p.message)}finally{m.value=!1,document.title=`${s.screen.name} | \u7F16\u8F91\u5668`,s.autoCanvasScale(()=>o.getPanelOffset)}}),{loading:m}}});const Y={class:"g-layout is-vertical edit-container"},z={class:"g-header"},Q={id:"edit-main-wp",class:"g-layout edit-main-wp"},Z={class:"g-layout edit-main"};function G(n,t,o,a,b,s){const u=_("header-toolbar"),r=_("layer-panel"),m=_("components-panel"),E=_("filter-manager-drawer"),p=_("toolbox-panel"),d=_("canvas-main"),i=_("g-loading"),f=_("footer-toolbar"),v=_("config-panel"),V=_("editor-context-menu");return q(),j(k,null,[h("div",Y,[h("div",z,[c(u)]),h("div",Q,[c(r),c(m),c(E),h("div",Z,[c(p),c(i,{spinning:n.loading},{default:F(()=>[c(d)]),_:1},8,["spinning"]),c(f)]),c(v)])]),c(V)],64)}const J=B(X,[["render",G],["__scopeId","data-v-508c5002"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{U as c,te as i};
