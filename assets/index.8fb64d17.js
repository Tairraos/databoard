import{_ as r,w as h,x as T,y as I,z as y,a as V,B as p,C as D,E as M,F as R,H as k,I as x}from"./AppRoot.e99935fe.js";import{bg as O,a4 as A,a8 as P,b7 as L,a9 as S,aj as q,a5 as s,a6 as $,aa as B,ad as v,aV as c,aZ as C,ae as F}from"./vendor.d49f6c0b.js";import{g as U}from"./templates.a29625ea.js";function j(o){switch(o){case"./other/date-picker/src/date-picker.ts":return r(()=>import("./AppRoot.e99935fe.js").then(function(e){return e.ag}),["assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function N(o){switch(o){case"./media/bg-box/src/bg-box.ts":return r(()=>import("./AppRoot.e99935fe.js").then(function(e){return e.ai}),["assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./media/border-box/src/border-box.ts":return r(()=>import("./AppRoot.e99935fe.js").then(function(e){return e.ah}),["assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./media/decoration/src/decoration.ts":return r(()=>import("./AppRoot.e99935fe.js").then(function(e){return e.aj}),["assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./media/main-img/src/main-img.ts":return r(()=>import("./main-img.c1de99af.js"),["assets/main-img.c1de99af.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function z(o){switch(o){case"./button/full-screen/src/full-screen.ts":return r(()=>import("./full-screen.c9846b6f.js"),["assets/full-screen.c9846b6f.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function H(o){switch(o){case"./text/main-title/src/main-title.ts":return r(()=>import("./main-title.e1162fe1.js"),["assets/main-title.e1162fe1.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./text/marquee/src/marquee.ts":return r(()=>import("./marquee.74842b3e.js"),["assets/marquee.74842b3e.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return r(()=>import("./number-title-flop.64570f00.js"),["assets/number-title-flop.64570f00.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./text/paragraph/src/paragraph.ts":return r(()=>import("./paragraph.9819621d.js"),["assets/paragraph.9819621d.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);case"./text/timer/src/timer.ts":return r(()=>import("./timer.d984f002.js"),["assets/timer.d984f002.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function W(o){switch(o){case"./chart/word-cloud/src/word-cloud.ts":return r(()=>import("./word-cloud.04c116d2.js"),["assets/word-cloud.04c116d2.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function Z(o){switch(o){case"./line/basic-line/src/basic-line.ts":return r(()=>import("./basic-line.b1996db0.js"),["assets/basic-line.b1996db0.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function G(o){switch(o){case"./bar/basic-bar/src/basic-bar.ts":return r(()=>import("./basic-bar.8f8a0cd1.js"),["assets/basic-bar.8f8a0cd1.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}async function J(o){const e=O(o.substring(1));switch(o.substring(1)){case"BasicBar":{const t=await G(`./bar/${e}/src/${e}.ts`);return new t.default}case"BasicLine":{const t=await Z(`./line/${e}/src/${e}.ts`);return new t.default}case"WordCloud":{const t=await W(`./chart/${e}/src/${e}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await H(`./text/${e}/src/${e}.ts`);return new t.default}case"FullScreen":{const t=await z(`./button/${e}/src/${e}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await N(`./media/${e}/src/${e}.ts`);return new t.default}case"DatePicker":{const t=await j(`./other/${e}/src/${e}.ts`);return new t.default}default:throw Error(`Unknown component type: ${o}.`)}}const K=async()=>{const o=h(),e=T(),t=I(),b=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].map(n=>J(n)),u=await Promise.all(b),d=u.map(n=>(n.attr.x=y(e.pageConfig.width-n.attr.w),n.attr.y=y(e.pageConfig.height-n.attr.h),o.add(n)));await Promise.all(d);const l=[],m=[];u.forEach(n=>{n.apis.source&&(m.push(n.id),l.push(n.loadData()))}),l.length>0&&(await Promise.all(l),setTimeout(()=>{m.forEach(n=>{var a;(a=t.events[n])==null||a.requestData()})},200))};const Q=A({name:"ScreenEditor",components:{HeaderToolbar:P(()=>r(()=>import("./index.bbf3e804.js"),["assets/index.bbf3e804.js","assets/index.0b9e6881.css","assets/vendor.d49f6c0b.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/screen.87dff68d.js","assets/layer.954b99b8.js","assets/publish-screen.98a14729.js","assets/publish-screen.b3fd3021.css","assets/release.31c8924b.js","assets/help.a829fd9b.js"])),FooterToolbar:P(()=>r(()=>import("./index.387412c0.js"),["assets/index.387412c0.js","assets/index.bb2a3f12.css","assets/vendor.d49f6c0b.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/arrow-down.6d1ccafa.js"])),EditorContextMenu:P(()=>r(()=>import("./index.3f142d94.js"),["assets/index.3f142d94.js","assets/index.2461d1e3.css","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/dom.022ad87e.js","assets/edit.11c88b80.js","assets/delete.72d54e44.js","assets/copy.d3abba55.js","assets/group.8affbec8.js","assets/show.1c25e3cd.js","assets/hide.565acfe8.js","assets/index.9cf894d9.js","assets/warning.618daeb9.js"])),CanvasMain:p(()=>r(()=>import("./index.2aa4ea41.js"),["assets/index.2aa4ea41.js","assets/index.e273171a.css","assets/vendor.d49f6c0b.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/dom.022ad87e.js","assets/index.9cf894d9.js","assets/warning.618daeb9.js","assets/templates.a29625ea.js"])),LayerPanel:p(()=>r(()=>import("./index.4096f99d.js"),["assets/index.4096f99d.js","assets/index.2f951781.css","assets/vendor.d49f6c0b.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/delete.72d54e44.js","assets/back.0296c12f.js","assets/group.8affbec8.js","assets/hide.565acfe8.js","assets/view-grid.d3d61ef7.js","assets/index.9cf894d9.js","assets/dom.022ad87e.js","assets/warning.618daeb9.js","assets/arrow-right.db77a0c2.js"])),ComponentsPanel:p(()=>r(()=>import("./index.efd0feba.js"),["assets/index.efd0feba.js","assets/index.8e032805.css","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/search.95338f7d.js","assets/back.0296c12f.js","assets/templates.a29625ea.js"])),ConfigPanel:p(()=>r(()=>import("./index.13c66a10.js"),["assets/index.13c66a10.js","assets/index.cf8db824.css","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/interact.a9e81af7.js","assets/config.3c16c364.js"])),ToolboxPanel:p(()=>r(()=>import("./index.a9cbc0d3.js"),["assets/index.a9cbc0d3.js","assets/index.8b0e4245.css","assets/vendor.d49f6c0b.js","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css"])),FilterManagerDrawer:p(()=>r(()=>import("./filter-manager-drawer.e412079c.js"),["assets/filter-manager-drawer.e412079c.js","assets/filter-manager-drawer.24f26014.css","assets/AppRoot.e99935fe.js","assets/AppRoot.b89f03eb.css","assets/vendor.d49f6c0b.js","assets/warning.618daeb9.js","assets/document.59ef4e01.js","assets/filter-collapse-item.d6212b6c.js","assets/arrow-left.2b284f25.js","assets/edit.11c88b80.js","assets/delete.72d54e44.js","assets/release.31c8924b.js","assets/config.3c16c364.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(o){const e=L(),t=D(),f=M(),b=R(),u=T(),d=h(),l=k(),m=S(!0);return b.enable(),u.setEditMode(),q(async()=>{var n;try{const a=parseInt(e.query.tpl);if(a>0){const{data:_}=await U(a);if(_){const{config:i}=_;u.setEditorOption({screen:{id:+o.projectId,name:_.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),d.load(i.coms);const{componentsView:w,publishersView:E,subscribersView:g}=i.variables;l.$patch({componentsView:w,publishersView:E,subscribersView:g}),f.$patch({dataFilters:(n=i.dataFilters)!=null?n:[]})}a===1&&K()}else{const _=+o.projectId;await Promise.all([u.loadScreen(_),f.request(_),d.request(_)])}}catch(a){x("editor",a.message)}finally{m.value=!1,document.title=`${u.screen.name} | \u7F16\u8F91\u5668`,u.autoCanvasScale(()=>t.getPanelOffset)}}),{loading:m}}}),X={class:"g-layout is-vertical edit-container"},Y={class:"g-header"},ee={id:"edit-main-wp",class:"g-layout edit-main-wp"},te={class:"g-layout edit-main"};function oe(o,e,t,f,b,u){const d=s("header-toolbar"),l=s("layer-panel"),m=s("components-panel"),n=s("filter-manager-drawer"),a=s("toolbox-panel"),_=s("canvas-main"),i=s("g-loading"),w=s("footer-toolbar"),E=s("config-panel"),g=s("editor-context-menu");return $(),B(F,null,[v("div",X,[v("div",Y,[c(d)]),v("div",ee,[c(l),c(m),c(n),v("div",te,[c(a),c(i,{spinning:o.loading},{default:C(()=>[c(_)]),_:1},8,["spinning"]),c(w)]),c(E)])]),c(g)],64)}var re=V(Q,[["render",oe],["__scopeId","data-v-30d16f0c"]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{J as c,se as i};
