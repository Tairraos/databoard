import{by as G,Y as I,aD as S,b2 as P,b3 as A,x as r,bd as i,bx as p,a4 as T}from"./App.c8de2d3d.js";import{o as Y,b as $}from"./dom.59566496.js";import{I as j}from"./warning.feae0676.js";const a=G({x:0,y:0}),W=()=>{const C=I(),f=S(),o=P(),m=A(),d=r(()=>o.selectedComs.every(e=>e.locked)),l=r(()=>o.selectedComs.every(e=>e.hided)),h=r(()=>o.selectedComs.every(e=>e.type===i.layer)),g=r(()=>{var c;const e=o.selectedComs,s=(c=e[0])==null?void 0:c.parentId;return s?e.some(t=>t.type===i.layer)?!0:!o.coms.find(t=>t.id===s):e.some(t=>{var n;return(n=t.children)==null?void 0:n.some(w=>w.type===i.layer)})}),y=e=>{const s=o.selectedComs;if(s.length===0)return;const c=s[0].parentId,t=s.map(n=>n.id);(e===p.top||e===p.down)&&t.reverse(),t.forEach(n=>{o.move(e,n,c)})},E=()=>{const e=o.selectedComs;if(e.length===0)return;const s=!d.value;e.forEach(c=>{c.locked=s})},x=()=>{const e=o.selectedComs;if(e.length===0)return;const s=!l.value;e.forEach(c=>{c.hided=s})},D=()=>{const e=o.selectedComs;if(e.length===0)return;const s=e.map(t=>t.alias),c=f.create({content:`\u5220\u9664\u540E\u53EF\u80FD\u65E0\u6CD5\u6062\u590D\uFF0C\u662F\u5426\u5220\u9664${s.join("\uFF0C")}\uFF0C\u5171${s.length}\u4E2A\u7EC4\u4EF6`,negativeText:"\u53D6\u6D88",positiveText:"\u786E\u5B9A",iconPlacement:"top",icon:()=>T(j),onPositiveClick:async()=>{c.loading=!0;try{await o.deletes(e)}catch(t){C.error(t.message)}}})},F=()=>{o.selectedComs[0].renameing=!0},v=()=>{o.selectedComs.forEach(e=>{o.copy(e.id)})},k=()=>{o.selectedComs.length!==0&&o.createGroup()},M=()=>{o.selectedComs.length!==0&&o.cancelGroup()},b=(e,s)=>{e.preventDefault(),e.stopPropagation(),s.selected&&(a.x=e.clientX,a.y=e.clientY,m.contextMenu.show=!0,Y(document,"click",u))},u=()=>{$(document,"click",u),m.contextMenu.show=!1};return{pos:a,isLocked:d,isHided:l,isGroup:h,disableGroup:g,showMenu:b,hideMenu:u,moveCom:y,lockCom:E,hideCom:x,confirmDeleteCom:D,renameCom:F,copyCom:v,composeComs:k,decomposeComs:M}};export{W as u};
