import{v as I,_ as r,w as h,x as T,y as V,z as y,a as D,B as p,C as M,E as R,F as k,H as x,I as O}from"./AppRoot.2c69a8d3.js";import{a4 as A,a8 as P,b9 as L,a9 as S,aj as $,a5 as s,aa as q,ad as v,aX as c,a$ as B,ae as C,a6 as F}from"./vendor.d03ee3fb.js";import{g as U}from"./templates.31a29605.js";function j(o){switch(o){case"./other/date-picker/src/date-picker.ts":return r(()=>import("./AppRoot.2c69a8d3.js").then(function(e){return e.ag}),["assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function N(o){switch(o){case"./media/bg-box/src/bg-box.ts":return r(()=>import("./AppRoot.2c69a8d3.js").then(function(e){return e.ai}),["assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./media/border-box/src/border-box.ts":return r(()=>import("./AppRoot.2c69a8d3.js").then(function(e){return e.ah}),["assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./media/decoration/src/decoration.ts":return r(()=>import("./AppRoot.2c69a8d3.js").then(function(e){return e.aj}),["assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./media/main-img/src/main-img.ts":return r(()=>import("./main-img.c628924c.js"),["assets/main-img.c628924c.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function z(o){switch(o){case"./button/full-screen/src/full-screen.ts":return r(()=>import("./full-screen.7825e39b.js"),["assets/full-screen.7825e39b.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function H(o){switch(o){case"./text/main-title/src/main-title.ts":return r(()=>import("./main-title.43f666ee.js"),["assets/main-title.43f666ee.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./text/marquee/src/marquee.ts":return r(()=>import("./marquee.82f20a02.js"),["assets/marquee.82f20a02.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return r(()=>import("./number-title-flop.f8bac135.js"),["assets/number-title-flop.f8bac135.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./text/paragraph/src/paragraph.ts":return r(()=>import("./paragraph.2d251e6e.js"),["assets/paragraph.2d251e6e.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);case"./text/timer/src/timer.ts":return r(()=>import("./timer.ffa5ffd6.js"),["assets/timer.ffa5ffd6.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function W(o){switch(o){case"./chart/word-cloud/src/word-cloud.ts":return r(()=>import("./word-cloud.58525025.js"),["assets/word-cloud.58525025.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function X(o){switch(o){case"./line/basic-line/src/basic-line.ts":return r(()=>import("./basic-line.c0cf73db.js"),["assets/basic-line.c0cf73db.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function G(o){switch(o){case"./bar/basic-bar/src/basic-bar.ts":return r(()=>import("./basic-bar.22c1e063.js"),["assets/basic-bar.22c1e063.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}async function J(o){const e=I(o.substring(1));switch(o.substring(1)){case"BasicBar":{const t=await G(`./bar/${e}/src/${e}.ts`);return new t.default}case"BasicLine":{const t=await X(`./line/${e}/src/${e}.ts`);return new t.default}case"WordCloud":{const t=await W(`./chart/${e}/src/${e}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await H(`./text/${e}/src/${e}.ts`);return new t.default}case"FullScreen":{const t=await z(`./button/${e}/src/${e}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await N(`./media/${e}/src/${e}.ts`);return new t.default}case"DatePicker":{const t=await j(`./other/${e}/src/${e}.ts`);return new t.default}default:throw Error(`Unknown component type: ${o}.`)}}const K=async()=>{const o=h(),e=T(),t=V(),b=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"].map(n=>J(n)),u=await Promise.all(b),d=u.map(n=>(n.attr.x=y(e.pageConfig.width-n.attr.w),n.attr.y=y(e.pageConfig.height-n.attr.h),o.add(n)));await Promise.all(d);const l=[],m=[];u.forEach(n=>{n.apis.source&&(m.push(n.id),l.push(n.loadData()))}),l.length>0&&(await Promise.all(l),setTimeout(()=>{m.forEach(n=>{var a;(a=t.events[n])==null||a.requestData()})},200))};const Q=A({name:"ScreenEditor",components:{HeaderToolbar:P(()=>r(()=>import("./index.fbc18153.js"),["assets/index.fbc18153.js","assets/index.0b9e6881.css","assets/vendor.d03ee3fb.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/screen.5f405b8c.js","assets/layer.77ac8c36.js","assets/publish-screen.7ce5c067.js","assets/publish-screen.b3fd3021.css","assets/release.1fd0f10b.js","assets/help.45cc0986.js"])),FooterToolbar:P(()=>r(()=>import("./index.01c33447.js"),["assets/index.01c33447.js","assets/index.bb2a3f12.css","assets/vendor.d03ee3fb.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/arrow-down.aab8a820.js"])),EditorContextMenu:P(()=>r(()=>import("./index.013827ed.js"),["assets/index.013827ed.js","assets/index.2461d1e3.css","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/dom.616b1dc0.js","assets/edit.e89450ea.js","assets/delete.b42b11b1.js","assets/copy.55d453fa.js","assets/group.a8545dd6.js","assets/show.ddf756c4.js","assets/hide.ffdb3e35.js","assets/index.8e553625.js","assets/warning.07582945.js"])),CanvasMain:p(()=>r(()=>import("./index.25b44024.js"),["assets/index.25b44024.js","assets/index.9d207945.css","assets/vendor.d03ee3fb.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/dom.616b1dc0.js","assets/index.8e553625.js","assets/warning.07582945.js","assets/templates.31a29605.js"])),LayerPanel:p(()=>r(()=>import("./index.b4317019.js"),["assets/index.b4317019.js","assets/index.2f951781.css","assets/vendor.d03ee3fb.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/delete.b42b11b1.js","assets/back.e5792d25.js","assets/group.a8545dd6.js","assets/hide.ffdb3e35.js","assets/view-grid.95f148c4.js","assets/index.8e553625.js","assets/dom.616b1dc0.js","assets/warning.07582945.js","assets/arrow-right.5b509789.js"])),ComponentsPanel:p(()=>r(()=>import("./index.26c72faa.js"),["assets/index.26c72faa.js","assets/index.8e032805.css","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/search.83f54522.js","assets/back.e5792d25.js","assets/templates.31a29605.js"])),ConfigPanel:p(()=>r(()=>import("./index.ad33c786.js"),["assets/index.ad33c786.js","assets/index.cf8db824.css","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/interact.7ec49704.js","assets/config.3c16c364.js"])),ToolboxPanel:p(()=>r(()=>import("./index.0c8d3fc3.js"),["assets/index.0c8d3fc3.js","assets/index.5e320483.css","assets/vendor.d03ee3fb.js","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css"])),FilterManagerDrawer:p(()=>r(()=>import("./filter-manager-drawer.8af80df0.js"),["assets/filter-manager-drawer.8af80df0.js","assets/filter-manager-drawer.24f26014.css","assets/AppRoot.2c69a8d3.js","assets/AppRoot.8a92985c.css","assets/vendor.d03ee3fb.js","assets/warning.07582945.js","assets/document.1838f8cd.js","assets/filter-collapse-item.b9744034.js","assets/arrow-left.6d3aab38.js","assets/edit.e89450ea.js","assets/delete.b42b11b1.js","assets/release.1fd0f10b.js","assets/config.3c16c364.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(o){const e=L(),t=M(),f=R(),b=k(),u=T(),d=h(),l=x(),m=S(!0);return b.enable(),u.setEditMode(),$(async()=>{var n;try{const a=parseInt(e.query.tpl);if(a>0){const{data:_}=await U(a);if(_){const{config:i}=_;u.setEditorOption({screen:{id:+o.projectId,name:_.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),d.load(i.coms);const{componentsView:w,publishersView:E,subscribersView:g}=i.variables;l.$patch({componentsView:w,publishersView:E,subscribersView:g}),f.$patch({dataFilters:(n=i.dataFilters)!=null?n:[]})}a===1&&K()}else{const _=+o.projectId;await Promise.all([u.loadScreen(_),f.request(_),d.request(_)])}}catch(a){O("editor",a.message)}finally{m.value=!1,document.title=`${u.screen.name} | \u7F16\u8F91\u5668`,u.autoCanvasScale(()=>t.getPanelOffset)}}),{loading:m}}}),Y={class:"g-layout is-vertical edit-container"},Z={class:"g-header"},ee={id:"edit-main-wp",class:"g-layout edit-main-wp"},te={class:"g-layout edit-main"};function oe(o,e,t,f,b,u){const d=s("header-toolbar"),l=s("layer-panel"),m=s("components-panel"),n=s("filter-manager-drawer"),a=s("toolbox-panel"),_=s("canvas-main"),i=s("g-loading"),w=s("footer-toolbar"),E=s("config-panel"),g=s("editor-context-menu");return F(),q(C,null,[v("div",Y,[v("div",Z,[c(d)]),v("div",ee,[c(l),c(m),c(n),v("div",te,[c(a),c(i,{spinning:o.loading},{default:B(()=>[c(_)]),_:1},8,["spinning"]),c(w)]),c(E)])]),c(g)],64)}var re=D(Q,[["render",oe],["__scopeId","data-v-30d16f0c"]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{J as c,se as i};
