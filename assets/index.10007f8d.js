import{aO as I,aP as l,_ as e,aQ as T,aR as O,aS as D,aT as w,e as x,aM as P,aU as g,a6 as R,aV as A,aW as L,aX as S,aY as y,s as $,a0 as M,aZ as C,f as B,m as j,x as h,j as c,w as F,P as k,r as _,o as q}from"./App.49df06d9.js";import{g as N}from"./templates.7801017d.js";const W=n=>n.replace("-2-d","2d").replace("-3-d","3d");async function U(n){const t=W(I(n.substring(1)));switch(n.substring(1)){case"BasicBar":{const o=await l(Object.assign({"./bar/basic-bar/src/basic-bar.ts":()=>e(()=>import("./basic-bar.a102f067.js"),["assets/basic-bar.a102f067.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./bar/${t}/src/${t}.ts`);return new o.default}case"BasicLine":{const o=await l(Object.assign({"./line/basic-line/src/basic-line.ts":()=>e(()=>import("./basic-line.463bf863.js"),["assets/basic-line.463bf863.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/echarts-animation.c54de7ad.js"])}),`./line/${t}/src/${t}.ts`);return new o.default}case"China2d":{const o=await l(Object.assign({"./map/china2d/src/china2d.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bW),["assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./map/${t}/src/${t}.ts`);return new o.default}case"China2dArea":case"China2dBubbles":case"China2dFlyingline":{const o=await l(Object.assign({"./map/china2d/src/china2d-area/index.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bV),["assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-bubbles/index.ts":()=>e(()=>import("./index.7b063596.js"),["assets/index.7b063596.js","assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./map/china2d/src/china2d-flyingline/index.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bX),["assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./map/china2d/src/${t}/index.ts`);return new o.default}case"WordCloud":{const o=await l(Object.assign({"./chart/word-cloud/src/word-cloud.ts":()=>e(()=>import("./word-cloud.7d8172a8.js"),["assets/word-cloud.7d8172a8.js","assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./chart/${t}/src/${t}.ts`);return new o.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const o=await l(Object.assign({"./text/main-title/src/main-title.ts":()=>e(()=>import("./main-title.e05143ca.js"),["assets/main-title.e05143ca.js","assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./text/marquee/src/marquee.ts":()=>e(()=>import("./marquee.dd538a75.js"),["assets/marquee.dd538a75.js","assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./text/number-title-flop/src/number-title-flop.ts":()=>e(()=>import("./number-title-flop.395c0ac1.js"),["assets/number-title-flop.395c0ac1.js","assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./text/paragraph/src/paragraph.ts":()=>e(()=>import("./paragraph.c84d036c.js"),["assets/paragraph.c84d036c.js","assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./text/timer/src/timer.ts":()=>e(()=>import("./timer.904b2791.js"),["assets/timer.904b2791.js","assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./text/${t}/src/${t}.ts`);return new o.default}case"FullScreen":{const o=await l(Object.assign({"./button/full-screen/src/full-screen.ts":()=>e(()=>import("./full-screen.bbc79daa.js"),["assets/full-screen.bbc79daa.js","assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./button/${t}/src/${t}.ts`);return new o.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const o=await l(Object.assign({"./media/bg-box/src/bg-box.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bT),["assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./media/border-box/src/border-box.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bS),["assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./media/decoration/src/decoration.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bU),["assets/App.49df06d9.js","assets/App.83a8713a.css"]),"./media/main-img/src/main-img.ts":()=>e(()=>import("./main-img.4ed65e2c.js"),["assets/main-img.4ed65e2c.js","assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./media/${t}/src/${t}.ts`);return new o.default}case"DatePicker":{const o=await l(Object.assign({"./other/date-picker/src/date-picker.ts":()=>e(()=>import("./App.49df06d9.js").then(a=>a.bY),["assets/App.49df06d9.js","assets/App.83a8713a.css"])}),`./other/${t}/src/${t}.ts`);return new o.default}default:throw Error(`Unknown component type: ${n}.`)}}const H=async()=>{const n=T(),t=O(),o=D(),a=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"],b=await Promise.all(a.map(r=>U(r)));b.map(r=>{r.attr.x=w(t.pageConfig.width-r.attr.w),r.attr.y=w(t.pageConfig.height-r.attr.h)}),await n.addComs(b);const s=[],u=[];b.forEach(r=>{r.apis.source&&(u.push(r.id),s.push(r.loadData()))}),s.length>0&&(await Promise.all(s),setTimeout(()=>{u.forEach(r=>{var m;(m=o.events[r])==null||m.requestData()})},200))},X=x({name:"ScreenEditor",components:{HeaderToolbar:P(()=>e(()=>import("./index.2d44adb8.js"),["assets/index.2d44adb8.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/screen.298e0da3.js","assets/layer.31e48457.js","assets/publish-screen.ebbd655f.js","assets/publish-screen.075bc684.css","assets/release.6d8737d9.js","assets/help.412f60d0.js","assets/index.c2f9b6bc.css"])),FooterToolbar:P(()=>e(()=>import("./index.601b58cd.js"),["assets/index.601b58cd.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/arrow-down.223216e8.js","assets/index.a3b0f861.css"])),EditorContextMenu:P(()=>e(()=>import("./index.adb6ff7b.js"),["assets/index.adb6ff7b.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/dom.20ecd84c.js","assets/edit.61b57b69.js","assets/delete.d656b376.js","assets/copy.b3b79b21.js","assets/group.9778f8ad.js","assets/lock.faa2669a.js","assets/show.9b4e227c.js","assets/hide.8ea76352.js","assets/index.ea5b026b.js","assets/warning.68e51252.js","assets/index.71b4c1c6.css"])),CanvasMain:g(()=>e(()=>import("./index.8d303c79.js"),["assets/index.8d303c79.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/dom.20ecd84c.js","assets/index.ea5b026b.js","assets/warning.68e51252.js","assets/templates.7801017d.js","assets/index.42e7b401.css"])),LayerPanel:g(()=>e(()=>import("./index.9f2b681a.js"),["assets/index.9f2b681a.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/delete.d656b376.js","assets/back.979bacf4.js","assets/group.9778f8ad.js","assets/lock.faa2669a.js","assets/hide.8ea76352.js","assets/view-grid.0576645f.js","assets/index.ea5b026b.js","assets/dom.20ecd84c.js","assets/warning.68e51252.js","assets/arrow-right.af223d48.js","assets/index.16c1012b.css"])),ComponentsPanel:g(()=>e(()=>import("./index.0dbd0fd1.js"),["assets/index.0dbd0fd1.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/search.19826cad.js","assets/back.979bacf4.js","assets/lock.faa2669a.js","assets/templates.7801017d.js","assets/index.9da0e4e0.css"])),ConfigPanel:g(()=>e(()=>import("./index.6cfde16d.js"),["assets/index.6cfde16d.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/interact.35859b45.js","assets/config.3c16c364.js","assets/index.b6e165b4.css"])),ToolboxPanel:g(()=>e(()=>import("./index.5a8ef3aa.js"),["assets/index.5a8ef3aa.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/index.add1ca62.css"])),FilterManagerDrawer:g(()=>e(()=>import("./filter-manager-drawer.dc8fe193.js"),["assets/filter-manager-drawer.dc8fe193.js","assets/App.49df06d9.js","assets/App.83a8713a.css","assets/warning.68e51252.js","assets/document.69d75fce.js","assets/filter-collapse-item.55d91064.js","assets/arrow-left.fe2bd7fb.js","assets/edit.61b57b69.js","assets/delete.d656b376.js","assets/release.6d8737d9.js","assets/drag.1323d952.js","assets/config.3c16c364.js","assets/filter-manager-drawer.6310fa74.css"]))},props:{projectId:{type:[String,Number],required:!0}},setup(n){const t=R(),o=A(),a=L(),b=S(),s=O(),u=T(),r=y(),m=$(!0);return b.enable(),s.setEditMode(),M(async()=>{var E;try{const p=parseInt(t.query.tpl);if(p>0){const{data:d}=await N(p);if(d){const{config:i}=d;s.setEditorOption({screen:{id:+n.projectId,name:d.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),u.load(i.coms);const{componentsView:f,publishersView:v,subscribersView:V}=i.variables;r.$patch({componentsView:f,publishersView:v,subscribersView:V}),a.$patch({dataFilters:(E=i.dataFilters)!=null?E:[]})}p===1&&H()}else{const d=+n.projectId;await Promise.all([s.loadScreen(d),a.request(d),u.request(d)])}}catch(p){C("editor",p.message)}finally{m.value=!1,document.title=`${s.screen.name} | \u7F16\u8F91\u5668`,s.autoCanvasScale(()=>o.getPanelOffset)}}),{loading:m}}});const Y={class:"g-layout is-vertical edit-container"},z={class:"g-header"},Q={id:"edit-main-wp",class:"g-layout edit-main-wp"},Z={class:"g-layout edit-main"};function G(n,t,o,a,b,s){const u=_("header-toolbar"),r=_("layer-panel"),m=_("components-panel"),E=_("filter-manager-drawer"),p=_("toolbox-panel"),d=_("canvas-main"),i=_("g-loading"),f=_("footer-toolbar"),v=_("config-panel"),V=_("editor-context-menu");return q(),j(k,null,[h("div",Y,[h("div",z,[c(u)]),h("div",Q,[c(r),c(m),c(E),h("div",Z,[c(p),c(i,{spinning:n.loading},{default:F(()=>[c(d)]),_:1},8,["spinning"]),c(f)]),c(v)])]),c(V)],64)}const J=B(X,[["render",G],["__scopeId","data-v-508c5002"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{U as c,te as i};
