import{_ as n,v as P,w as T,x as I,y,a as V,z as p,B as D,C as M,E as R,F as k,H as x}from"./App.404b9962.js";import{bt as O,a4 as A,a8 as h,bi as L,a9 as q,aj as S,a5 as s,a6 as $,aa as C,ad as w,aV as c,b1 as B,ae as F}from"./vendor.891943b7.js";import{g as U}from"./templates.1d620fcb.js";function j(r){switch(r){case"./other/date-picker/src/date-picker.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.ao}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function N(r){switch(r){case"./media/bg-box/src/bg-box.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.aj}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./media/border-box/src/border-box.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.ai}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./media/decoration/src/decoration.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.ak}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./media/main-img/src/main-img.ts":return n(()=>import("./main-img.b4677acf.js"),["assets/main-img.b4677acf.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function z(r){switch(r){case"./button/full-screen/src/full-screen.ts":return n(()=>import("./full-screen.1adac938.js"),["assets/full-screen.1adac938.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function H(r){switch(r){case"./text/main-title/src/main-title.ts":return n(()=>import("./main-title.6b30fc07.js"),["assets/main-title.6b30fc07.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./text/marquee/src/marquee.ts":return n(()=>import("./marquee.e44c70da.js"),["assets/marquee.e44c70da.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./text/number-title-flop/src/number-title-flop.ts":return n(()=>import("./number-title-flop.b8bbfe9c.js"),["assets/number-title-flop.b8bbfe9c.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./text/paragraph/src/paragraph.ts":return n(()=>import("./paragraph.7309521f.js"),["assets/paragraph.7309521f.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./text/timer/src/timer.ts":return n(()=>import("./timer.52f890dd.js"),["assets/timer.52f890dd.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function W(r){switch(r){case"./chart/word-cloud/src/word-cloud.ts":return n(()=>import("./word-cloud.42050526.js"),["assets/word-cloud.42050526.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function G(r){switch(r){case"./map/china2d/src/china2d-area/index.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.al}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./map/china2d/src/china2d-bubbles/index.ts":return n(()=>import("./index.0f644dee.js"),["assets/index.0f644dee.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);case"./map/china2d/src/china2d-flyingline/index.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.an}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function J(r){switch(r){case"./map/china2d/src/china2d.ts":return n(()=>import("./App.404b9962.js").then(function(e){return e.am}),["assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function K(r){switch(r){case"./line/basic-line/src/basic-line.ts":return n(()=>import("./basic-line.e59c26bc.js"),["assets/basic-line.e59c26bc.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function Q(r){switch(r){case"./bar/basic-bar/src/basic-bar.ts":return n(()=>import("./basic-bar.cd1a436c.js"),["assets/basic-bar.cd1a436c.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js","assets/echarts-animation.c54de7ad.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}const X=r=>r.replace("-2-d","2d").replace("-3-d","3d");async function Y(r){const e=X(O(r.substring(1)));switch(r.substring(1)){case"BasicBar":{const t=await Q(`./bar/${e}/src/${e}.ts`);return new t.default}case"BasicLine":{const t=await K(`./line/${e}/src/${e}.ts`);return new t.default}case"China2d":{const t=await J(`./map/${e}/src/${e}.ts`);return new t.default}case"China2dArea":case"China2dBubbles":case"China2dFlyingline":{const t=await G(`./map/china2d/src/${e}/index.ts`);return new t.default}case"WordCloud":{const t=await W(`./chart/${e}/src/${e}.ts`);return new t.default}case"MainTitle":case"Marquee":case"NumberTitleFlop":case"Paragraph":case"Timer":{const t=await H(`./text/${e}/src/${e}.ts`);return new t.default}case"FullScreen":{const t=await z(`./button/${e}/src/${e}.ts`);return new t.default}case"BgBox":case"BorderBox":case"Decoration":case"MainImg":{const t=await N(`./media/${e}/src/${e}.ts`);return new t.default}case"DatePicker":{const t=await j(`./other/${e}/src/${e}.ts`);return new t.default}default:throw Error(`Unknown component type: ${r}.`)}}const Z=async()=>{const r=P(),e=T(),t=I(),f=["VMainTitle","VNumberTitleFlop","VDatePicker","VBgBox","VBorderBox","VDecoration","VBasicBar","VMarquee","VParagraph","VTimer","VFullScreen","VMainImg","VWordCloud"],m=await Promise.all(f.map(o=>Y(o)));m.map(o=>{o.attr.x=y(e.pageConfig.width-o.attr.w),o.attr.y=y(e.pageConfig.height-o.attr.h)}),await r.addComs(m);const a=[],_=[];m.forEach(o=>{o.apis.source&&(_.push(o.id),a.push(o.loadData()))}),a.length>0&&(await Promise.all(a),setTimeout(()=>{_.forEach(o=>{var l;(l=t.events[o])==null||l.requestData()})},200))};const ee=A({name:"ScreenEditor",components:{HeaderToolbar:h(()=>n(()=>import("./index.eee4c1c2.js"),["assets/index.eee4c1c2.js","assets/index.0b9e6881.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/screen.be71199c.js","assets/layer.269da1ba.js","assets/publish-screen.f5b2fe93.js","assets/publish-screen.b3fd3021.css","assets/release.7f243710.js","assets/help.59785292.js"])),FooterToolbar:h(()=>n(()=>import("./index.cfc34042.js"),["assets/index.cfc34042.js","assets/index.bb2a3f12.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/arrow-down.8f9f19b3.js"])),EditorContextMenu:h(()=>n(()=>import("./index.d96fb807.js"),["assets/index.d96fb807.js","assets/index.2461d1e3.css","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js","assets/dom.8a9bb796.js","assets/edit.4ec2cf6b.js","assets/delete.d67e866a.js","assets/copy.93d9dd7e.js","assets/group.0a541bb8.js","assets/lock.0f174ba4.js","assets/show.e61abf81.js","assets/hide.094467f4.js","assets/index.972bfb8a.js","assets/warning.078b14f6.js"])),CanvasMain:p(()=>n(()=>import("./index.65ba81e9.js"),["assets/index.65ba81e9.js","assets/index.b76bd1e0.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/dom.8a9bb796.js","assets/index.972bfb8a.js","assets/warning.078b14f6.js","assets/templates.1d620fcb.js"])),LayerPanel:p(()=>n(()=>import("./index.f443c66a.js"),["assets/index.f443c66a.js","assets/index.b42e030c.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/delete.d67e866a.js","assets/back.2cb48cb6.js","assets/group.0a541bb8.js","assets/lock.0f174ba4.js","assets/hide.094467f4.js","assets/view-grid.253c0d12.js","assets/index.972bfb8a.js","assets/dom.8a9bb796.js","assets/warning.078b14f6.js","assets/arrow-right.a7b4c086.js"])),ComponentsPanel:p(()=>n(()=>import("./index.91a5e7d0.js"),["assets/index.91a5e7d0.js","assets/index.13c30c0e.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/search.d0ddd5a3.js","assets/back.2cb48cb6.js","assets/lock.0f174ba4.js","assets/templates.1d620fcb.js"])),ConfigPanel:p(()=>n(()=>import("./index.c48476ac.js"),["assets/index.c48476ac.js","assets/index.f9b12c77.css","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js","assets/interact.ae76fda5.js","assets/config.3c16c364.js"])),ToolboxPanel:p(()=>n(()=>import("./index.38473a6b.js"),["assets/index.38473a6b.js","assets/index.8b0e4245.css","assets/vendor.891943b7.js","assets/App.404b9962.js","assets/App.db4f71dd.css"])),FilterManagerDrawer:p(()=>n(()=>import("./filter-manager-drawer.c849d218.js"),["assets/filter-manager-drawer.c849d218.js","assets/filter-manager-drawer.24f26014.css","assets/App.404b9962.js","assets/App.db4f71dd.css","assets/vendor.891943b7.js","assets/warning.078b14f6.js","assets/document.8fdddbc1.js","assets/filter-collapse-item.ed2309f0.js","assets/arrow-left.14d78497.js","assets/edit.4ec2cf6b.js","assets/delete.d67e866a.js","assets/release.7f243710.js","assets/drag.9793705e.js","assets/config.3c16c364.js"]))},props:{projectId:{type:[String,Number],required:!0}},setup(r){const e=L(),t=D(),f=M(),m=R(),a=T(),_=P(),o=k(),l=q(!0);return m.enable(),a.setEditMode(),S(async()=>{var b;try{const d=parseInt(e.query.tpl);if(d>0){const{data:u}=await U(d);if(u){const{config:i}=u;a.setEditorOption({screen:{id:+r.projectId,name:u.name},config:{width:i.width,height:i.height,bgimage:i.bgimage,bgcolor:i.bgcolor,styleFilterParams:i.styleFilterParams}}),_.load(i.coms);const{componentsView:v,publishersView:E,subscribersView:g}=i.variables;o.$patch({componentsView:v,publishersView:E,subscribersView:g}),f.$patch({dataFilters:(b=i.dataFilters)!=null?b:[]})}d===1&&Z()}else{const u=+r.projectId;await Promise.all([a.loadScreen(u),f.request(u),_.request(u)])}}catch(d){x("editor",d.message)}finally{l.value=!1,document.title=`${a.screen.name} | \u7F16\u8F91\u5668`,a.autoCanvasScale(()=>t.getPanelOffset)}}),{loading:l}}}),te={class:"g-layout is-vertical edit-container"},re={class:"g-header"},ne={id:"edit-main-wp",class:"g-layout edit-main-wp"},oe={class:"g-layout edit-main"};function ae(r,e,t,f,m,a){const _=s("header-toolbar"),o=s("layer-panel"),l=s("components-panel"),b=s("filter-manager-drawer"),d=s("toolbox-panel"),u=s("canvas-main"),i=s("g-loading"),v=s("footer-toolbar"),E=s("config-panel"),g=s("editor-context-menu");return $(),C(F,null,[w("div",te,[w("div",re,[c(_)]),w("div",ne,[c(o),c(l),c(b),w("div",oe,[c(d),c(i,{spinning:r.loading},{default:B(()=>[c(u)]),_:1},8,["spinning"]),c(v)]),c(E)])]),c(g)],64)}var ie=V(ee,[["render",ae],["__scopeId","data-v-30d16f0c"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{Y as c,_e as i};
