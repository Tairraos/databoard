var P=Object.defineProperty;var V=(s,t,n)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var v=(s,t,n)=>(V(s,typeof t!="symbol"?t+"":t,n),n);import{f as k,o as p,m as g,x as r,e as x,u as W,a4 as E,v as S,V as C,a5 as D,r as _,P as M,Q as N,l as T,j as m,w as $,t as A,B as F,a6 as j,s as I,$ as R,a0 as L,a2 as z,h as b,n as X,p as q,a7 as H,a8 as B}from"./App.49df06d9.js";import{I as G}from"./arrow-down.223216e8.js";import{I as O}from"./document.69d75fce.js";import{I as U}from"./tutorial.c2ee862e.js";import{I as Q}from"./my-com.a88adbfe.js";import{I as J}from"./my-data.90446e8d.js";import{I as K}from"./layer.31e48457.js";const Y={},Z={t:"1629556429050",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4369","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},tt=r("path",{d:"M172.08888854 967.11111147a45.51111147 45.51111147 0 0 1-45.5111104-45.51111147V102.4a45.51111147 45.51111147 0 0 1 45.5111104-45.51111147h637.15555626a45.51111147 45.51111147 0 0 1 45.5111104 45.51111147v136.53333333h-91.02222186V147.91111147H217.6v728.17777706h546.13333334v-91.02222186h91.02222186v136.53333333a45.51111147 45.51111147 0 0 1-45.5111104 45.51111147H172.08888854z m591.6444448-273.06666667v-136.53333333h-318.57777814v-91.02222294h318.57777814V329.9555552l227.5555552 182.0444448-227.5555552 182.0444448z","p-id":"4370"},null,-1),et=[tt];function nt(s,t){return p(),g("svg",Z,et)}const at=k(Y,[["render",nt]]),st="//files.pengxiaotian.com",ot=x({name:"NavHeader",components:{IconArrowDown:G},props:{isFixed:{type:Boolean,default:!1}},setup(){const s=W(),t=E(),n=[{label:"\u5E2E\u52A9\u6587\u6863",key:"doc",icon:()=>C(D,null,{default:()=>C(O)})},{type:"divider",key:"d1"},{label:"\u9000\u51FA",key:"logout",icon:()=>C(D,null,{default:()=>C(at)})}],e=async()=>{await s.logout(),t.push({name:"Login"})},a=i=>{i==="logout"&&e()};return{cdn:st,userName:S(()=>s.name),avatar:S(()=>s.avatar),profileOpts:n,handleProfileSelect:a}}});const it={class:"logo"},ct={class:"top-tip"},rt=r("strong",{class:"tip-strong"},"\u516C\u544A",-1),dt={class:"datav-marquee"},lt={class:"content"},ht=r("a",{href:"https://github.com/pengxiaotian/datav-vue",target:"_blank",class:"project-href"},"https://github.com/pengxiaotian/datav-vue",-1),ut=r("span",{class:"content-space"},null,-1),pt={class:"user"},_t={class:"header-item"},vt={class:"user-link-wrap"},mt={class:"user-link"},gt={class:"datav-nav"},ft={class:"header-img"},wt=["src"],yt=r("div",{class:"nav-img"},null,-1);function Ct(s,t,n,e,a,i){const o=_("n-avatar"),c=_("IconArrowDown"),d=_("n-icon"),h=_("n-dropdown");return p(),g("div",null,[r("div",{class:"datav-hearder",style:F({background:s.isFixed?"#171b22":""})},[r("div",it,[r("div",ct,[rt,r("div",dt,[r("span",lt,[(p(),g(M,null,N(2,f=>(p(),g(M,{key:f},[T(" 1. DataV \u4EC5\u652F\u6301\u8C37\u6B4C Chrome \u6D4F\u89C8\u5668\u7248\u672C 62 \u4EE5\u4E0A\u30022. DataV \u57FA\u4E8E Vue 3.x \u5F00\u53D1\u30023. \u9879\u76EE\u5730\u5740\uFF1A"),ht,ut],64))),64))])])])]),r("div",pt,[r("div",_t,[m(h,{options:s.profileOpts,placement:"bottom-end","show-arrow":!0,onSelect:s.handleProfileSelect},{default:$(()=>[r("span",vt,[m(o,{round:"",size:20,src:s.avatar+"?imageView2/1/w/80/h/80"},null,8,["src"]),r("span",mt,A(s.userName),1),m(d,{size:14},{default:$(()=>[m(c)]),_:1})])]),_:1},8,["options","onSelect"])])])],4),r("div",gt,[r("div",ft,[r("img",{class:"nav-img-text",src:`${s.cdn}/datav/nav-img-text.png`},null,8,wt),yt])])])}const bt=k(ot,[["render",Ct]]);class It{constructor(t,n,e=0){v(this,"j",.85);v(this,"k",10);v(this,"l",4);v(this,"canvas");v(this,"tabs");v(this,"pattern",null);v(this,"tabWidthList",[]);v(this,"tabHeight",0);v(this,"opt",{currentIndex:0,nextIndex:1,speed:1,timer:0,width:200,height:100,animating:!1,curDisX:0,distance:0});this.canvas=document.getElementById(t),this.tabs=document.querySelectorAll(n);const{opt:a}=this;this.calcTabs(),this.initCanvas(this.canvas,a.width,a.height),this.createPattern(this.canvas),this.startDraw(0),this.toggle(e)}initCanvas(t,n,e){const a=t.getContext("2d"),{devicePixelRatio:i}=window;t.width=n*i,t.height=e*i,t.style.width=`${n}px`,t.style.height=`${e}px`,a.scale(i,i)}calcTabs(){const{opt:t,tabs:n}=this,e=[];let a=0;n.forEach(i=>{e.push(a),a+=i.offsetWidth}),e[0]=-20,e.push(a),this.tabWidthList=e,this.tabHeight=n[0].offsetHeight+0,t.height=this.tabHeight+20,t.width=window.innerWidth}createPattern(t){const i=document.createElement("canvas");i.width=140,i.height=63,i.style.width=`${140/1}px`,i.style.height=`${63/1}px`;const o=i.getContext("2d");o.scale(1,1),o.lineWidth=.4;for(let c=3,d=.8,h=1;30>h;h++)o.strokeStyle=`RGBA(22, 120, 160, ${d})`,o.beginPath(),o.moveTo(0,h*c),o.lineTo(140,h*c),o.stroke(),o.closePath(),10<h&&(d-=.1);this.pattern=t.getContext("2d").createPattern(i,"repeat-x")}calcAvgSpeed(t){const{l:n,j:e,k:a}=this,i=(n*e*t+a*(1-e)*t)/(a*n*20);return Math.max(Math.abs(i),2.5)*Math.sign(i)}getCurSpeed(t,n){const{l:e,j:a,k:i,opt:o}=this;return Math.abs(t)>Math.abs(a*n)?e*o.speed:i*o.speed}calCurve(t,n,e,a,i,o){t.bezierCurveTo(n+o,e,a-o,i,a,i)}drawHightlight(t){const{opt:n}=this,e=this.canvas.getContext("2d"),a=.3;e.clearRect(0,0,2*n.width,2*n.height),e.shadowColor="rgba(36, 131, 255, 1)",e.shadowBlur=5,e.strokeStyle="#004CB3",e.lineWidth=.8,e.fillStyle="none",this.draw(e,!1);const i=e.createLinearGradient(0,0,n.width,n.height),o=t-a;i.addColorStop(Math.min(1,Math.max(0,0+o)),"rgba(0,0,0,0)"),i.addColorStop(Math.min(1,Math.max(0,0+o+.1)),"#8ed6ff"),i.addColorStop(Math.min(1,0+o+a),"#8ed6ff"),i.addColorStop(Math.min(1,0+o+a+.1),"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,0)"),e.lineWidth=1.5,e.strokeStyle=i,e.fillStyle=this.pattern,this.draw(e,!0)}startDraw(t){this.drawHightlight(t),this.opt.timer=requestAnimationFrame(()=>{this.startDraw((t+.005)%1.6)})}draw(t,n){const{opt:e,tabWidthList:a,tabHeight:i}=this,o=e.currentIndex,c=i,d=0,h=40,f=20,l=.5,w=2.5;let u=0;if(t.beginPath(),t.moveTo(-50,e.height+10),t.lineTo(-50,c+l),e.animating){const y=this.getCurSpeed(e.curDisX,e.distance);u=Math.min(Math.abs(e.distance),Math.abs(e.curDisX+y))*Math.sign(y)}if(t.lineTo(d+a[o]+u-h/2,c+l),this.calCurve(t,d+a[o]+u-h/2,c+l,d+a[o]+u+h/2,w+l,f),e.animating){const y=a[e.nextIndex+1]-a[e.nextIndex];t.lineTo(d+a[o]+y+u-h/2,w+l),this.calCurve(t,d+a[o]+y+u-h/2,w+l,d+a[o]+y+u+h/2,c+l,f)}else t.lineTo(d+a[o+1]+u-h/2,w+l),this.calCurve(t,d+a[o+1]+u-h/2,w+l,d+a[o+1]+u+h/2,c+l,f);t.lineTo(e.width+10,c+l),t.lineTo(e.width+10,e.height+10),t.closePath(),t.stroke(),n&&t.fill(),n&&e.animating&&(e.curDisX=u,Math.abs(u)>=Math.abs(e.distance)&&(e.animating=!1,e.currentIndex=e.nextIndex))}toggle(t){const{opt:n,tabWidthList:e}=this;t!==n.currentIndex&&e&&e.length&&(!n.animating||t!==n.nextIndex)&&(n.animating=!0,n.distance=e[t]-e[n.currentIndex],n.speed=this.calcAvgSpeed(n.distance),n.curDisX=0,n.nextIndex=t)}resize(){const{opt:t}=this;t.timer&&cancelAnimationFrame(t.timer),this.calcTabs(),this.initCanvas(this.canvas,t.width,t.height),this.startDraw(0)}}const kt=x({name:"NavMain",components:{IconLayer:K,IconMyData:J,IconMyCom:Q,IconTutorial:U},props:{navs:{type:Array,required:!0}},emits:["change"],setup(s,t){const n=j(),e=I(0);let a=null;const i=c=>{a&&(e.value=c.id,a.toggle(c.id),t.emit("change",c))},o=R(()=>{a&&a.resize()},500);return L(()=>{const c=s.navs.find(d=>d.key===n.name);e.value=c?c.id:0,a=new It("nav-canvas",".nav-main .nav-span",e.value),window.addEventListener("resize",o)}),z(()=>{window.removeEventListener("resize",o)}),{toggleNav:i,activeNav:e}}});const Mt=s=>(H("data-v-ad3f7672"),s=s(),B(),s),$t={class:"nav-main"},xt=Mt(()=>r("canvas",{id:"nav-canvas",style:{position:"absolute","z-index":"-1",left:"0"}},null,-1)),St=["onClick"];function Dt(s,t,n,e,a,i){const o=_("IconLayer"),c=_("IconMyData"),d=_("IconMyCom"),h=_("IconTutorial"),f=_("n-icon");return p(),g("div",$t,[xt,(p(!0),g(M,null,N(s.navs,l=>(p(),g("span",{key:l.id,class:"nav-span"},[r("a",{class:q(["nav-link",{"nav-active":s.activeNav===l.id}]),onClick:w=>s.toggleNav(l)},[m(f,{class:"nav-icon",size:20},{default:$(()=>[l.key==="MyProject"?(p(),b(o,{key:0})):l.key==="MyData"?(p(),b(c,{key:1})):l.key==="MyCom"?(p(),b(d,{key:2})):l.key==="MyCase"?(p(),b(h,{key:3})):X("",!0)]),_:2},1024),T(" "+A(l.name),1)],10,St)]))),128))])}const Et=k(kt,[["render",Dt],["__scopeId","data-v-ad3f7672"]]),Nt=x({name:"Home",components:{NavHeader:bt,NavMain:Et},setup(){const s=I(null),t=I(!1),n=I([{id:0,key:"MyProject",name:"\u6211\u7684\u53EF\u89C6\u5316"},{id:1,key:"MyData",name:"\u6211\u7684\u6570\u636E"},{id:2,key:"MyCom",name:"\u6211\u7684\u7EC4\u4EF6"},{id:3,key:"MyCase",name:"\u6559\u7A0B"}]),e=E(),a=()=>{t.value=s.value.$el.offsetTop>200},i=o=>{e.push({name:o.key})};return L(()=>{window.addEventListener("scroll",a)}),z(()=>{window.removeEventListener("scroll",a)}),{navMainRef:s,isFixed:t,navs:n,onNavChange:i}}});const Tt=s=>(H("data-v-7045fd46"),s=s(),B(),s),At={class:"datav"},Ft=Tt(()=>r("div",{class:"nav-shadow"},null,-1)),Lt={class:"datav-main"},zt={class:"datav-content"};function Ht(s,t,n,e,a,i){const o=_("nav-header"),c=_("nav-main"),d=_("router-view");return p(),g("div",At,[m(o,{"is-fixed":s.isFixed},null,8,["is-fixed"]),m(c,{ref:"navMainRef",navs:s.navs,style:F({background:s.isFixed?"var(--datav-body-bg)":""}),onChange:s.onNavChange},null,8,["navs","style","onChange"]),Ft,r("div",Lt,[r("div",zt,[m(d)])])])}const Gt=k(Nt,[["render",Ht],["__scopeId","data-v-7045fd46"]]);export{Gt as default};
